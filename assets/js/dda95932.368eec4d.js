"use strict";(self.webpackChunkuniversity=self.webpackChunkuniversity||[]).push([[512],{7132:(e,i,n)=>{n.d(i,{Ay:()=>o,RM:()=>l});var t=n(4848),s=n(8453);const l=[];function r(e){const i={a:"a",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{style:{textAlign:"left"},children:"Environment"}),(0,t.jsx)(i.th,{style:{textAlign:"left"},children:"Webhook URL"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{style:{textAlign:"left"},children:"EU1 Ireland"}),(0,t.jsx)(i.td,{style:{textAlign:"left"},children:e.eu1?(0,t.jsx)(i.a,{href:e.eu1,children:e.eu1}):"\u2014"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{style:{textAlign:"left"},children:"EU2 Frankfurt"}),(0,t.jsx)(i.td,{style:{textAlign:"left"},children:e.eu2?(0,t.jsx)(i.a,{href:e.eu2,children:e.eu2}):"\u2014"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{style:{textAlign:"left"},children:"US east coast"}),(0,t.jsx)(i.td,{style:{textAlign:"left"},children:e.us?(0,t.jsx)(i.a,{href:e.us,children:e.us}):"\u2014"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{style:{textAlign:"left"},children:"Japan Tokyo"}),(0,t.jsx)(i.td,{style:{textAlign:"left"},children:e.jp?(0,t.jsx)(i.a,{href:e.jp,children:e.jp}):"\u2014"})]})]})]})}function o(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}},8448:(e,i,n)=>{n.d(i,{Ay:()=>o,RM:()=>l});var t=n(4848),s=n(8453);const l=[];function r(e){const i={a:"a",admonition:"admonition",p:"p",...(0,s.R)(),...e.components};return(0,t.jsxs)(i.admonition,{title:"Work in progress",type:"warning",children:[(0,t.jsxs)(i.p,{children:["We're still working on this part and would love to hear your thoughts! Feel free to ",(0,t.jsx)(i.a,{href:"https://github.com/rossumai/university/discussions",children:"share your feedback"})," or ",(0,t.jsx)(i.a,{href:"https://github.com/rossumai/university/pulls",children:"submit a pull request"}),". Thank you! \ud83d\ude4f"]}),e.issue?(0,t.jsxs)(i.p,{children:["Tracking issue: ",(0,t.jsx)(i.a,{href:e.issue,children:e.issue})]}):""]})}function o(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}},1641:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"learn/line-items-distribution/index","title":"Distributing values among line items","description":"Distributive webhook extension allows for distribution of header-level or multiple-lines-level fields to respective line items. This is handy when some values appear only once per multiple lines.","source":"@site/docs/learn/line-items-distribution/index.md","sourceDirName":"learn/line-items-distribution","slug":"/learn/line-items-distribution/","permalink":"/docs/learn/line-items-distribution/","draft":false,"unlisted":false,"editUrl":"https://github.com/rossumai/university/tree/master/docs/learn/line-items-distribution/index.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Distributing values among line items","sidebar_position":1},"sidebar":"learnSidebar","previous":{"title":"JSON Templating","permalink":"/docs/learn/json-templating/"},"next":{"title":"Line items grouping","permalink":"/docs/learn/line-items-grouping/"}}');var s=n(4848),l=n(8453),r=n(7132);n(8448);const o={title:"Distributing values among line items",sidebar_position:1},d=void 0,a={},h=[{value:"Distributive Webhook extension",id:"distributive-webhook-extension",level:2},{value:"Available endpoints",id:"available-endpoints",level:3},...r.RM,{value:"Add the fields to schema",id:"add-the-fields-to-schema",level:2},{value:"Configure the queue",id:"configure-the-queue",level:2},{value:"Configuration example",id:"configuration-example",level:3},{value:"Change the Direction of Distribution",id:"change-the-direction-of-distribution",level:3}];function c(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Distributive webhook"})," extension allows for distribution of header-level or multiple-lines-level fields to respective line items. This is handy when some values appear only once per multiple lines."]}),"\n",(0,s.jsx)(i.h2,{id:"distributive-webhook-extension",children:"Distributive Webhook extension"}),"\n",(0,s.jsx)(i.p,{children:"Distribution of values to line items is provided as a service by Rossum.ai in the form of a webhook. To start using the extension, follow these steps:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Login to your Rossum account."}),"\n",(0,s.jsxs)(i.li,{children:["Navigate to ",(0,s.jsx)(i.strong,{children:"Extensions \u2192 My extensions"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Click on ",(0,s.jsx)(i.strong,{children:"Create extension"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Fill the following fields:","\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Name: ",(0,s.jsx)(i.code,{children:"Distributive Webhook"})]}),"\n",(0,s.jsxs)(i.li,{children:["Trigger events: ",(0,s.jsx)(i.code,{children:"Document content: Initialize, Updated"})]}),"\n",(0,s.jsx)(i.li,{children:"Queues where the extension should be executed"}),"\n",(0,s.jsxs)(i.li,{children:["Extension type: ",(0,s.jsx)(i.code,{children:"Webhook"})]}),"\n",(0,s.jsxs)(i.li,{children:["URL (see ",(0,s.jsx)(i.a,{href:"#available-endpoints",children:"Available endpoints"})," below)"]}),"\n",(0,s.jsxs)(i.li,{children:["Under Advanced settings find Additional notification metadata and enable ",(0,s.jsx)(i.code,{children:"Schemas"})," and ",(0,s.jsx)(i.code,{children:"Queues"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["Click ",(0,s.jsx)(i.strong,{children:"Create the webhook"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"available-endpoints",children:"Available endpoints"}),"\n",(0,s.jsx)(r.Ay,{eu1:"https://elis.rossum.ai/svc/distributive/validate",eu2:"https://{your domain}.rossum.app/svc/distributive/validate",us:"https://us.app.rossum.ai/svc/distributive/validate",jp:"https://shared-jp.app.rossum.ai/svc/distributive/validate"}),"\n",(0,s.jsx)(i.h2,{id:"add-the-fields-to-schema",children:"Add the fields to schema"}),"\n",(0,s.jsx)(i.p,{children:"The distributive webhook needs the following fields:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Multi-value field for extracting the header-level or multi-line-level fields - source of the distribution"}),"\n",(0,s.jsx)(i.li,{children:"Line item field - target of the distribution"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"Example with 2 multi-value fields",src:n(3873).A+"",width:"433",height:"901"})}),"\n",(0,s.jsx)(i.h2,{id:"configure-the-queue",children:"Configure the queue"}),"\n",(0,s.jsx)(i.p,{children:"The source and target fields of the distribution are configured in each queue metadata:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Make sure the queue is selected in the distributive webhook extension"}),"\n",(0,s.jsxs)(i.li,{children:["Save the configuration into the queue metadata - you need to use the ",(0,s.jsx)(i.a,{href:"https://elis.rossum.ai/api/docs/#queue",children:"API"})]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"configuration-example",children:"Configuration example"}),"\n",(0,s.jsx)(i.p,{children:"The configuration follows this format:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "distributive_fields": {\n    "{line items table schema ID}": {\n      "{line item field (target) schema ID}": {\n        "schema_ids": [\n            "{multivalue field\'s child (source) schema ID}"\n        ]\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(i.p,{children:"For the sample schema above, the configuration would look like this:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "distributive_fields": {\n    "line_items": {\n      "item_delivery_note": {\n        "schema_ids": [\n          "delivery_note"\n        ]\n      },\n      "item_delivery_date": {\n        "schema_ids": [\n          "delivery_date"\n        ]\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(i.h3,{id:"change-the-direction-of-distribution",children:"Change the Direction of Distribution"}),"\n",(0,s.jsx)(i.p,{children:"The default direction of the distribution is downwards, to the rows below the value."}),"\n",(0,s.jsx)(i.p,{children:"For cases when the value should be distributed to the rows above it (instead of the ones below), it is possible to specify the preferred direction."}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",metastring:"{8,9}",children:'{\n  "distributive_fields": {\n    "line_items": {\n      "item_delivery_note": {\n        "schema_ids": [\n          "delivery_note"\n        ],\n        "preferred_direction": "upwards",\n        "preferred_direction_only": true\n      }\n    }\n  }\n}\n'})})]})}function u(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},3873:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/schema-0db9ee8f47fd6ce6655f1ee50e607e13.png"},8453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>o});var t=n(6540);const s={},l=t.createContext(s);function r(e){const i=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:i},e.children)}}}]);