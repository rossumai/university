---
title: 'Sandboxes'
---

import PaidFeature from '../\_paid_feature.md';

<PaidFeature />

Rossum Sandboxes allow for isolated development of the solution and easy deployments of the tested solution to production.

Using Sandboxes currently requires installation of an external tooling available at: https://github.com/rossumai/prd

## Installation

First, download the Sandboxing tool `prd` locally:

```bash
git clone git@github.com:rossumai/prd.git
cd prd
```

And install it:

```bash
brew install pipx
pipx ensurepath
pipx install .
```

This will install the Sandboxing tool in the `~/.local/bin` folder making it available globally under command `prd`.

To upgrade to the latest version, run (from the same Git directory):

```bash
git pull
pipx install . --force
```

## Available CLI commands

`prd` is a CLI tool and offers the following main commands (always prefixed with `prd`):

| Command                | Description                                                                                                                                                                                  |
| :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `init`                 | Initialize a new project (creates a `credentials.json` file). When called with a project name, it also initialized an empty Git repository.                                                  |
| `pull`                 | Pulls all objects from the `source` organization (as per `credentials.json` configuration).                                                                                                  |
| `push`                 | Pushes the latest changes to the `source` organization. This is effectively a counterpart of the `pull` command.                                                                             |
| `release`              | Pushes the latest changes to the `target` organization. Visit [Deployment patterns](./deployment-patterns.md#two-environments-for-sandbox-and-production) to learn more about this use-case. |
| `purge`                | Removes all objects in the target organization.                                                                                                                                              |
| `purge unused_schemas` | Removes old unused schemas.                                                                                                                                                                  |

Complete list of commands and their parameters can be found when running `prd --help`.

## Available configuration options

The only necessary configuration is in the `credentials.json` file right after running `prd init`.

Default configuration using username and password:

```json
{
  // Source organization (typically the only one needed).
  "source": {
    // API base URL. Consult with your support team (SA) in case you are not sure what
    // the value should be.
    "api_base": "https://api.elis.rossum.ai/v1",

    // Username under which `prd` will be calling the API.
    "username": "...",

    // Password for the user under which `prd` will be calling the API.
    "password": "..."
  },

  // Configures whether source organization should be used as a target organization or not.
  "use_same_org_as_target": true,

  // Target organization in case it is necessary to release into a different organization
  // from source. The configuration is identical with `source` parameter.
  "target": {
    "api_base": "...",
    "username": "...",
    "password": "..."
  }
}
```

Alternatively, you can use API token instead of username and password if you have it:

```json
{
  "source": {
    "api_base": "https://api.elis.rossum.ai/v1",
    // highlight-start
    "token": "..." // use API token instead of username/password
    // highlight-end
  },
  "use_same_org_as_target": true,
  "target": {
    "api_base": "...",
    "token": "..."
  }
}
```

## Configuring `mapping.yaml` file

Note that this file is automatically generated by the `prd pull` command. It is typically not necessary to configure it manually unless some more advanced use-case is needed.

```yaml
# The main key describing `source` organization details:
ORGANIZATION:
  # ID of the `source` organization:
  id: 123456
  # Name of the `source` organization:
  name: MyOrganization (Sandbox)
  targets:
    # ID of the `target` organization (if any):
    - target_id: 654321
  WORKSPACES:
    # IDs of the `source` workspaces:
    - id: 123456
      # Name of the `source` workspace:
      name: 'My Test Workspace'
      targets:
        # ID(s) of the `target` workspace(s) (there can be none or more than one):
        - target_id: null
      QUEUES:
        # IDs of the `source` queues belonging to the `source` workspace above:
        - id: 123456
          # Name of the `source` queue:
          name: Invoices
          targets:
            # ID(s) of the `target` queue(s) (there can be none or more than one):
            - target_id: null
          INBOX:
            # IDs of the `source` inbox belonging to the `source` queue above:
            id: 123456
            # Name of the `source` inbox:
            name: Invoices
            targets:
              # ID(s) of the `target` inbox(s) (there can be none or more than one):
              - target_id: null
  HOOKS:
    # IDs of the `source` hooks:
    - id: 123456
      # Name of the `source` hook:
      name: Supplier Data Matching
      targets:
        # ID(s) of the `target` hook(s) (there can be none or more than one):
        - target_id: null
  SCHEMAS:
    # IDs of the `source` schemas:
    - id: 123456
      # Name of the `source` schema:
      name: Tax invoices (US) schema
      targets:
        # ID(s) of the `target` schema(s) (there can be none or more than one):
        - target_id: null
```
